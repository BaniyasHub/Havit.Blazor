@using System.Globalization

<HxAutosuggest Label="Basic example" Placeholder="Click here" TItem="CultureInfo" MinimumLength="0" TValue="int" @bind-Value="@autosuggestValue" DataProvider="ProvideTemplatedSuggestions" ValueSelector="(CultureInfo c) => c.LCID" ItemFromValueResolver="(int lcid) => Task.FromResult(CultureInfo.GetCultureInfo(lcid))">
    <ItemTemplate Context="item">@item.EnglishName <sup>@item.LCID</sup></ItemTemplate>
    <EmptyTemplate>
        <span class="p-2">Couldn't find any matching locale</span>
    </EmptyTemplate>
</HxAutosuggest>

<p>Value: @autosuggestValue</p>

@code
{
    private int autosuggestValue;

    private async Task<AutosuggestDataProviderResult<CultureInfo>> ProvideSuggestions(AutosuggestDataProviderRequest request)
    {
        await Task.Delay(500);
        return new AutosuggestDataProviderResult<CultureInfo>
        {
            Data = CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                                .Where(c => c.LCID != 4096) // see Remarks: https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo.lcid?view=net-5.0#System_Globalization_CultureInfo_LCID
                                .Where(c => c.EnglishName?.Contains(request.UserInput, StringComparison.CurrentCultureIgnoreCase) ?? false)
                                .OrderBy(c => c.EnglishName)
                                .Take(10)
                                .ToList()
        };
    }

    private async Task<AutosuggestDataProviderResult<CultureInfo>> ProvideTemplatedSuggestions(AutosuggestDataProviderRequest request)
    {

        await Task.Delay(500);
        if (string.IsNullOrWhiteSpace(request.UserInput))
        {
            return new AutosuggestDataProviderResult<CultureInfo>() { Data = null };
        }
        else
        {
            return new AutosuggestDataProviderResult<CultureInfo>()
            {
                Data = CultureInfo.GetCultures(CultureTypes.SpecificCultures)
                                .Where(c => c.LCID != 4096) // see Remarks: https://docs.microsoft.com/en-us/dotnet/api/system.globalization.cultureinfo.lcid?view=net-5.0#System_Globalization_CultureInfo_LCID
                                .Where(c => c.EnglishName?.Contains(request.UserInput, StringComparison.CurrentCultureIgnoreCase) ?? false)
                                .OrderBy(c => c.EnglishName)
                                .Take(10)
                                .ToList()
            };
        }
    }
}