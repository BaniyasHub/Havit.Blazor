@page "/HxListLayoutTest"

<h1>HxListLayout</h1>

<HxListLayout Title="Nadpis" TFilterModelType="FilterModelDto" FilterModel="filterModel" FilterModelChanged="HandleFilterModelChanged">
	<NamedViewsTemplate>
		<HxNamedViewList TFilterType="FilterModelDto" Filter="filterModel" FilterChanged="HandleFilterModelChanged" NamedViews="namedViews" OnNamedViewSelected="NamedViewSelected" />
	</NamedViewsTemplate>
	<SearchTemplate>
		<HxSearchBox OnQueryTextChanged="SearchRequested" />
	</SearchTemplate>
	<FilterTemplate Context="filterContext">
		<HxInputNumber Label="MinimumItemId" @bind-Value="filterContext.MinimumItemId" />
	</FilterTemplate>
	<CommandsTemplate>
		<HxButton Text="Přidat fakturu" Skin="ButtonSkins.New" CssClass="ms-1" OnClick="NewItemClicked" />
	</CommandsTemplate>
	<DataTemplate>
		<HxGrid @ref="gridComponent" TItemType="DataItemDto" PageSize="20" DataProvider="LoadDataItems" SelectedDataItem="currentItem" SelectedDataItemChanged="HandleSelectedDataItemChanged">
			<Columns>
				<HxGridColumn TItemType="DataItemDto" HeaderText="Id" ItemTextSelector="@(item => item.ItemId.ToString())" SortString="@nameof(DataItemDto.ItemId)" IsDefaultSortColumn="true" />
				<HxGridColumn TItemType="DataItemDto" HeaderText="Name" ItemTextSelector="@(item => item.Name)" SortString="@nameof(DataItemDto.Name)" />
			</Columns>
			<ContextMenu Context="item">
				<HxContextMenu>
					<HxContextMenuItem Text="Smazat" OnClick="async () => await DeleteItemClicked(item)" ConfirmationQuestion="@($"Opravdu si přejete smazat {item.Name}?")" />
				</HxContextMenu>
			</ContextMenu>
		</HxGrid>
	</DataTemplate>
	<DetailTemplate>
		Edit: @currentItem?.ItemId
	</DetailTemplate>
</HxListLayout>
