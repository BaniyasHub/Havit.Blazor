@namespace Havit.Blazor.Components.Web.Bootstrap.Internal
@typeparam TItemType
@typeparam TValueType

<div id="@dropdownId" class="dropdown">
	<Havit.Blazor.Components.Web.Bootstrap.Internal.HxAutosuggestInput @ref="autosuggestInput" InputId="@InputId" EnabledEffective="@EnabledEffective" Value="@userInput" OnInputInput="HandleInputInput" OnInputFocus="HandleFocus" OnInputBlur="HandleInputBlur" Placeholder="@Placeholder" CssClass="@InputCssClass" />
    <div class="hx-autosuggest-input-icon position-absolute top-50 end-0 translate-middle-y">
        @if (dataProviderInProgress)
        {
            <div>
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </div>
        }
        else if (!EqualityComparer<TValueType>.Default.Equals(Value, default))
        { 
            <a role="button" @onclick="HandleCrossClick" @onclick:stopPropagation>
                <HxIcon Icon="BootstrapIcon.X" />
            </a>
        }
        else
	    {
	        <HxIcon Icon="BootstrapIcon.Search" />
	    }
    </div>
	<Havit.Blazor.Components.Web.Bootstrap.Internal.HxAutosuggestItems TItemType="TItemType" Items="@suggestions" TextSelector="TextSelectorEffective" OnItemClick="HandleItemClick" />
</div>
